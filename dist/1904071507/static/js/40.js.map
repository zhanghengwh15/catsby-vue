{"version":3,"sources":["webpack:///src/views/modules/sys/sysdept-add-update.vue","webpack:///./src/views/modules/sys/sysdept-add-update.vue?b3e2","webpack:///./src/views/modules/sys/sysdept-add-update.vue"],"names":["sysdept_add_update","required","message","trigger","_this","this","then","_ref","data","resetFields","adornUrl","id","_ref2","num","pid","pname","simplename","fullname","adress","phone","company","deptListTreeSetCurrentNode","label","_this2","undefined","version","_ref3","msg","sys_sysdept_add_update","render","_vm","_h","$createElement","_c","_self","attrs","title","dataForm","close-on-click-modal","visible","on","update:visible","$event","ref","model","rules","dataRule","label-width","nativeOn","keyup","_k","keyCode","key","dataFormSubmit","prop","placeholder","value","callback","$$v","$set","expression","_v","placement","visible2","deptList","props","deptListTreeProps","node-key","default-expand-all","highlight-current","expand-on-click-node","current-change","deptListTreeCurrentChangeHandle","directives","name","rawName","arg","staticClass","readonly","slot","click","type","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/40.js","sourcesContent":["<template>\n  <el-dialog\n    :title=\"!dataForm.id ? '新增' : '修改'\"\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"visible\">\n    <el-form :model=\"dataForm\" :rules=\"dataRule\" ref=\"dataForm\" @keyup.enter.native=\"dataFormSubmit()\" label-width=\"80px\">\n        <el-form-item label=\"排序\" prop=\"num\">\n            <el-input v-model=\"dataForm.num\" placeholder=\"排序\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"父部门\" prop=\"pname\">\n          <el-popover\n            ref=\"deptListPopover\"\n            placement=\"bottom-start\"\n            trigger=\"click\"\n            v-model=\"visible2\">\n            <el-tree\n              :data=\"deptList\"\n              :props=\"deptListTreeProps\"\n              node-key=\"id\"\n              ref=\"deptListTree\"\n              @current-change=\"deptListTreeCurrentChangeHandle\"\n              :default-expand-all=\"true\"\n              :highlight-current=\"true\"\n              :expand-on-click-node=\"false\">\n            </el-tree>\n          </el-popover>\n            <el-input v-model=\"dataForm.pname\"  v-popover:deptListPopover :readonly=\"true\" placeholder=\"点击选择上级菜单\" class=\"menu-list__input\"   ></el-input>\n        </el-form-item>\n        <el-form-item label=\"名称\" prop=\"simplename\">\n            <el-input v-model=\"dataForm.simplename\" placeholder=\"简称\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"地址\" prop=\"adress\">\n            <el-input v-model=\"dataForm.adress\" placeholder=\"地址\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电话\" prop=\"phone\">\n            <el-input v-model=\"dataForm.phone\" placeholder=\"电话\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"公司名\" prop=\"company\">\n            <el-input v-model=\"dataForm.company\" placeholder=\"公司名\"></el-input>\n        </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">取消</el-button>\n      <el-button type=\"primary\" @click=\"dataFormSubmit()\">确定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        visible: false,\n        visible2: false,\n        dataForm: {\n          id: '',\n          num: 0,\n          pid: '',\n          pname: '',\n          simplename: '',\n          fullname: '',\n          adress: '',\n          phone: '',\n          company: ''\n        },\n        deptList: [],\n        deptListTreeProps: {\n          label: 'label',\n          children: 'children'\n        },\n        dataRule: {\n          pid: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          simplename: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          company: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n          ]\n        }\n      }\n    },\n    methods: {\n      init (id) {\n        this.dataForm.id = id || 0\n        this.$http.get(this.$http.adornUrl('/sysdept/depttree'))\n          .then(({data}) => {\n            if (data) {\n              if (this.deptList.length === 0) {\n                this.deptList.push(data)\n              }\n            }\n          }).then(() => {\n            this.visible = true\n            this.$nextTick(() => {\n              this.$refs['dataForm'].resetFields()\n              if (this.dataForm.id) {\n                this.$http({\n                  url: this.$http.adornUrl(`/sysdept/info`),\n                  method: 'get',\n                  params: this.$http.adornParams({\n                    'id': this.dataForm.id\n                  })\n                }).then(({data}) => {\n                  if (data && data.code === 0) {\n                    this.dataForm.num = data.sysdept.num\n                    this.dataForm.pid = data.sysdept.pid\n                    this.dataForm.pname = data.sysdept.pname\n                    this.dataForm.simplename = data.sysdept.simplename\n                    this.dataForm.fullname = data.sysdept.fullname\n                    this.dataForm.adress = data.sysdept.adress\n                    this.dataForm.phone = data.sysdept.phone\n                    this.dataForm.company = data.sysdept.company\n                    this.deptListTreeSetCurrentNode()\n                  }\n                }\n              )\n              } else {\n                this.deptListTreeSetCurrentNode()\n              }\n            }\n          )\n          }\n      )\n      },\n      // 菜单树选中\n      deptListTreeCurrentChangeHandle (data, node) {\n        this.dataForm.pid = data.id\n        this.dataForm.pname = data.label\n        //  pname\n        this.visible2 = false\n      },\n      // 菜单树设置当前选中节点\n      deptListTreeSetCurrentNode () {\n        this.$refs.deptListTree.setCurrentKey(this.dataForm.pid)\n        this.dataForm.pname = (this.$refs.deptListTree.getCurrentNode() || {})['label']\n      },\n      // 表单提交\n      dataFormSubmit () {\n        this.$refs['dataForm'].validate((valid) => {\n          if (valid) {\n            this.$http({\n              url: this.$http.adornUrl(`/sysdept/${!this.dataForm.id ? 'add' : 'update'}`),\n              method: 'post',\n              data: this.$http.adornData({\n                'id': this.dataForm.id || undefined,\n                'num': this.dataForm.num,\n                'pid': this.dataForm.pid,\n                'simplename': this.dataForm.simplename,\n                'fullname': this.dataForm.fullname,\n                'version': this.dataForm.version,\n                'adress': this.dataForm.adress,\n                'phone': this.dataForm.phone,\n                'company': this.dataForm.company\n              })\n            }).then(({data}) => {\n              if (data && data.code === 0) {\n                this.$message({\n                  message: '操作成功',\n                  type: 'success',\n                  duration: 1500,\n                  onClose: () => {\n                    this.visible = false\n                    this.$emit('refreshDataList')\n                  }\n                })\n              } else {\n                this.$message.error(data.msg)\n              }\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/modules/sys/sysdept-add-update.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":!_vm.dataForm.id ? '新增' : '修改',\"close-on-click-modal\":false,\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.dataRule,\"label-width\":\"80px\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.dataFormSubmit()}}},[_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"num\"}},[_c('el-input',{attrs:{\"placeholder\":\"排序\"},model:{value:(_vm.dataForm.num),callback:function ($$v) {_vm.$set(_vm.dataForm, \"num\", $$v)},expression:\"dataForm.num\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"父部门\",\"prop\":\"pname\"}},[_c('el-popover',{ref:\"deptListPopover\",attrs:{\"placement\":\"bottom-start\",\"trigger\":\"click\"},model:{value:(_vm.visible2),callback:function ($$v) {_vm.visible2=$$v},expression:\"visible2\"}},[_c('el-tree',{ref:\"deptListTree\",attrs:{\"data\":_vm.deptList,\"props\":_vm.deptListTreeProps,\"node-key\":\"id\",\"default-expand-all\":true,\"highlight-current\":true,\"expand-on-click-node\":false},on:{\"current-change\":_vm.deptListTreeCurrentChangeHandle}})],1),_vm._v(\" \"),_c('el-input',{directives:[{name:\"popover\",rawName:\"v-popover:deptListPopover\",arg:\"deptListPopover\"}],staticClass:\"menu-list__input\",attrs:{\"readonly\":true,\"placeholder\":\"点击选择上级菜单\"},model:{value:(_vm.dataForm.pname),callback:function ($$v) {_vm.$set(_vm.dataForm, \"pname\", $$v)},expression:\"dataForm.pname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"simplename\"}},[_c('el-input',{attrs:{\"placeholder\":\"简称\"},model:{value:(_vm.dataForm.simplename),callback:function ($$v) {_vm.$set(_vm.dataForm, \"simplename\", $$v)},expression:\"dataForm.simplename\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"地址\",\"prop\":\"adress\"}},[_c('el-input',{attrs:{\"placeholder\":\"地址\"},model:{value:(_vm.dataForm.adress),callback:function ($$v) {_vm.$set(_vm.dataForm, \"adress\", $$v)},expression:\"dataForm.adress\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"placeholder\":\"电话\"},model:{value:(_vm.dataForm.phone),callback:function ($$v) {_vm.$set(_vm.dataForm, \"phone\", $$v)},expression:\"dataForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"公司名\",\"prop\":\"company\"}},[_c('el-input',{attrs:{\"placeholder\":\"公司名\"},model:{value:(_vm.dataForm.company),callback:function ($$v) {_vm.$set(_vm.dataForm, \"company\", $$v)},expression:\"dataForm.company\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dataFormSubmit()}}},[_vm._v(\"确定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4c96558a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/modules/sys/sysdept-add-update.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./sysdept-add-update.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c96558a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./sysdept-add-update.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/modules/sys/sysdept-add-update.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}