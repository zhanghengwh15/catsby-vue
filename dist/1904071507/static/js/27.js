webpackJsonp([27],{"8r41":function(n,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t={data:function(){return{param:{},dataForm:{name:"",author:"",codePackage:"",htmlPackage:"",jsPackage:"",xmlPackage:"",encoded:"",functions:"",entityName:"",id:"",dbName:"",tableName:""},dataBaseData:[],dataSheetData:[],templateData:[],templateGroupData:[],filterDataBaseText:"",filterDatasheetText:"",filterTemplateText:"",multipleSelection:[],paramsList:[]}},activated:function(){this.getDataBasesList(),this.getTemplateGroupList(),this.getParams()},methods:{getDataBasesList:function(){var n=this;this.$http({url:this.$http.adornUrl("/codedbinfo/all"),method:"get"}).then(function(a){var e=a.data;n.dataBaseData=e.dbinfo})},getDataSheetsList:function(n){var a=this;this.$http({url:this.$http.adornUrl("/code/getTables"),method:"get",params:{dbinfoId:n}}).then(function(n){var e=n.data;a.dataSheetData=e.table})},getTemplateGroupList:function(){var n=this;this.$http({url:this.$http.adornUrl("/codetemplategroup/all"),method:"get"}).then(function(a){var e=a.data;console.log(e),n.templateGroupData=e.list})},getTemplateList:function(n){var a=this;this.$http({url:this.$http.adornUrl("/codetemplate/all"),method:"get",params:{groupId:n}}).then(function(n){var e=n.data;a.templateData=e.codetemplate})},dataBaseChange:function(n){this.dataForm.id=n.id,this.getDataSheetsList(n.id)},dataSheetChange:function(n){this.dataForm.tableName=n.tableName,this.dataForm.entityName=this.getClassName(n.tableName),this.dataForm.name=n.chinaName},link:function(n,a){return n.tableName+" - "+n.chinaName},handleSelectionChange:function(n){this.multipleSelection=[];for(var a=0;a<n.length;a++)this.multipleSelection.push(n[a].id)},genCode:function(){var n=this;this.$refs.dataForm.validate(function(a){a&&n.$axios({url:n.$http.adornUrl("/code/genCode?token="+n.$cookie.get("token")),method:"post",responseType:"blob",data:{codeDbinfoEntity:{id:n.dataForm.id},generationEntity:{codePackage:n.dataForm.codePackage,htmlPackage:n.dataForm.htmlPackage,jsPackage:n.dataForm.jsPackage,xmlPackage:n.dataForm.xmlPackage,author:n.dataForm.author,entityName:n.dataForm.entityName,name:n.dataForm.name,tableName:n.dataForm.tableName},encoded:n.dataForm.encoded,dbName:n.dataForm.dbName,templates:n.multipleSelection}}).then(function(n){console.log(n);var a=new Blob([n.data],{type:n.data.type}),e=window.URL.createObjectURL(a),t=document.createElement("a");t.href=e;var l=decodeURI(n.headers.name),o="unknown";l&&(o=decodeURI(l)),t.setAttribute("download",o),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(e)})})},getParams:function(){var n=this;this.$http({url:this.$http.adornUrl("/codegenparams/all"),method:"get"}).then(function(a){var e=a.data;n.paramsList=e.list})},selectParam:function(n){var a=this.paramsList.find(function(a){return a.id===n});this.dataForm.author=a.author,this.dataForm.codePackage=a.codePackage,this.dataForm.htmlPackage=a.htmlPackage,this.dataForm.jsPackage=a.jsPackage,this.dataForm.xmlPackage=a.xmlPackage,this.dataForm.encoded=a.encoded},getClassName:function(n){for(var a=n.toLocaleLowerCase(),e=0,t="";-1!==(e=a.indexOf("_"));)t+=a.substring(0,e),a=a.substring(e+1,e+2).toUpperCase()+a.substring(e+2);return t=(t+=a).substring(0,1).toUpperCase()+t.substring(1)}}},l={render:function(){var n=this,a=n.$createElement,e=n._self._c||a;return e("div",{staticClass:"mod-config"},[e("el-form",{ref:"dataForm",attrs:{model:n.dataForm,"label-width":"80px"}},[e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"参数"}},[e("el-select",{attrs:{placeholder:"请选择参数"},on:{change:n.selectParam},model:{value:n.param,callback:function(a){n.param=a},expression:"param"}},n._l(n.paramsList,function(n){return e("el-option",{key:n.alias,attrs:{label:n.alias,value:n.id}})}))],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"作者",prop:"author"}},[e("el-input",{model:{value:n.dataForm.author,callback:function(a){n.$set(n.dataForm,"author",a)},expression:"dataForm.author"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:n.genCode}},[n._v("生成")])],1)],1)],1),n._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"Code包名",prop:"codePackage"}},[e("el-input",{model:{value:n.dataForm.codePackage,callback:function(a){n.$set(n.dataForm,"codePackage",a)},expression:"dataForm.codePackage"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"Html包名",prop:"htmlPackage"}},[e("el-input",{model:{value:n.dataForm.htmlPackage,callback:function(a){n.$set(n.dataForm,"htmlPackage",a)},expression:"dataForm.htmlPackage"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"JS包名",prop:"jsPackage"}},[e("el-input",{model:{value:n.dataForm.jsPackage,callback:function(a){n.$set(n.dataForm,"jsPackage",a)},expression:"dataForm.jsPackage"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"XML包名",prop:"xmlPackage"}},[e("el-input",{model:{value:n.dataForm.xmlPackage,callback:function(a){n.$set(n.dataForm,"xmlPackage",a)},expression:"dataForm.xmlPackage"}})],1)],1)],1),n._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"编码",prop:"encoded"}},[e("el-select",{attrs:{placeholder:"请选择参数"},model:{value:n.dataForm.encoded,callback:function(a){n.$set(n.dataForm,"encoded",a)},expression:"dataForm.encoded"}},[e("el-option",{attrs:{label:"UTF-8",value:"UTF-8"}}),n._v(" "),e("el-option",{attrs:{label:"GBK",value:"GBK"}})],1)],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"类名",prop:"entityName"}},[e("el-input",{model:{value:n.dataForm.entityName,callback:function(a){n.$set(n.dataForm,"entityName",a)},expression:"dataForm.entityName"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"功能",prop:"name"}},[e("el-input",{model:{value:n.dataForm.name,callback:function(a){n.$set(n.dataForm,"name",a)},expression:"dataForm.name"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"菜单",prop:"alias"}},[e("el-input",{model:{value:n.dataForm.alias,callback:function(a){n.$set(n.dataForm,"alias",a)},expression:"dataForm.alias"}})],1)],1)],1)],1),n._v(" "),e("el-row",[e("el-col",{attrs:{span:7}},[e("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:n.filterDataBaseText,callback:function(a){n.filterDataBaseText=a},expression:"filterDataBaseText"}}),n._v(" "),e("el-table",{ref:"dataBaseTable",staticStyle:{width:"100%"},attrs:{data:n.dataBaseData.filter(function(a){return!n.filterDataBaseText||a.alias.toLowerCase().includes(n.filterDataBaseText.toLowerCase())}),"max-height":"500","highlight-current-row":"",stripe:""},on:{"current-change":n.dataBaseChange}},[e("el-table-column",{attrs:{fixed:"",prop:"alias",label:"数据库",align:"center"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:7,offset:1}},[e("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:n.filterDatasheetText,callback:function(a){n.filterDatasheetText=a},expression:"filterDatasheetText"}}),n._v(" "),e("el-table",{ref:"dataSheetTable",staticStyle:{width:"100%"},attrs:{data:n.dataSheetData.filter(function(a){return!n.filterDatasheetText||a.tableName.toLowerCase().includes(n.filterDatasheetText.toLowerCase())}),height:"500","highlight-current-row":"",stripe:""},on:{"current-change":n.dataSheetChange}},[e("el-table-column",{attrs:{fixed:"",prop:"tableName",formatter:n.link,label:"数据表",align:"center"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:7,offset:1}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(a){n.getTemplateList(n.filterTemplateText)}},model:{value:n.filterTemplateText,callback:function(a){n.filterTemplateText=a},expression:"filterTemplateText"}},n._l(n.templateGroupData,function(n){return e("el-option",{key:n.name,attrs:{label:n.name,value:n.id}})})),n._v(" "),e("el-table",{ref:"templateTable",staticStyle:{width:"100%"},attrs:{data:n.templateData,"tooltip-effect":"dark","max-height":"500",stripe:""},on:{"selection-change":n.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),n._v(" "),e("el-table-column",{attrs:{fixed:"",prop:"templateName",label:"模板",align:"center"}})],1)],1)],1)],1)},staticRenderFns:[]};var o=e("46Yf")(t,l,!1,function(n){e("8wyE")},"data-v-28fe765f",null);a.default=o.exports},"8wyE":function(n,a,e){var t=e("SMCS");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);e("XkoO")("0e07b2b4",t,!0)},SMCS:function(n,a,e){(n.exports=e("acE3")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"codegeneration.vue",sourceRoot:""}])}});
//# sourceMappingURL=27.js.map