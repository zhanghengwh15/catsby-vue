{"version":3,"sources":["webpack:///src/components/table-tree-column/index.vue","webpack:///./src/components/table-tree-column/index.vue?3972","webpack:///./src/components/table-tree-column/index.vue","webpack:///src/views/modules/sys/sysdept-add-update.vue","webpack:///./src/views/modules/sys/sysdept-add-update.vue?b3e2","webpack:///./src/views/modules/sys/sysdept-add-update.vue","webpack:///src/views/modules/sys/sysdept.vue","webpack:///./src/views/modules/sys/sysdept.vue?996c","webpack:///./src/views/modules/sys/sysdept.vue"],"names":["table_tree_column","String","_this","this","_expanded","data","treeKey","doLayout","parentId","i","ids","components_table_tree_column","render","_vm","_h","$createElement","_c","_self","_b","attrs","prop","scopedSlots","_u","key","fn","scope","style","childStyles","row","on","click","$event","preventDefault","toggleHandle","$index","class","iconClasses","iconStyles","_v","_s","$attrs","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","sysdept_add_update","required","message","trigger","then","_ref","resetFields","adornUrl","id","_ref2","num","pid","pname","simplename","fullname","adress","phone","company","deptListTreeSetCurrentNode","label","_this2","undefined","version","_ref3","msg","sys_sysdept_add_update","title","dataForm","close-on-click-modal","visible","update:visible","ref","model","rules","dataRule","label-width","nativeOn","keyup","_k","keyCode","dataFormSubmit","placeholder","value","callback","$$v","$set","expression","placement","visible2","deptList","props","deptListTreeProps","node-key","default-expand-all","highlight-current","expand-on-click-node","current-change","deptListTreeCurrentChangeHandle","directives","name","rawName","arg","staticClass","readonly","slot","type","sysdept","TableTreeColumn","AddOrUpdate","tableHight","getDataList","adornParams","list","_this3","sys_sysdept","inline","clearable","isAuth","addOrUpdateHandle","_e","staticStyle","width","dataList","border","stripe","height","tableViewHight","header-align","parentKey","align","fixed","size","deleteHandle","refreshDataList"],"mappings":"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","file":"static/js/36.js","sourcesContent":["<template>\n  <el-table-column :prop=\"prop\" v-bind=\"$attrs\">\n    <template slot-scope=\"scope\">\n      <span @click.prevent=\"toggleHandle(scope.$index, scope.row)\" :style=\"childStyles(scope.row)\">\n        <i :class=\"iconClasses(scope.row)\" :style=\"iconStyles(scope.row)\"></i>\n        {{ scope.row[prop] }}\n      </span>\n    </template>\n  </el-table-column>\n</template>\n<script>\n  import isArray from 'lodash/isArray'\n  export default {\n    name: 'table-tree-column',\n    props: {\n      prop: {\n        type: String\n      },\n      treeKey: {\n        type: String,\n        default: 'id'\n      },\n      parentKey: {\n        type: String,\n        default: 'parentId'\n      },\n      levelKey: {\n        type: String,\n        default: '_level'\n      },\n      childKey: {\n        type: String,\n        default: 'children'\n      }\n    },\n    methods: {\n      childStyles (row) {\n        return { 'padding-left': (row[this.levelKey] > 1 ? row[this.levelKey] * 7 : 0) + 'px' }\n      },\n      iconClasses (row) {\n        return [ !row._expanded ? 'el-icon-caret-right' : 'el-icon-caret-bottom' ]\n      },\n      iconStyles (row) {\n        return { 'visibility': this.hasChild(row) ? 'visible' : 'hidden' }\n      },\n      hasChild (row) {\n        return (isArray(row[this.childKey]) && row[this.childKey].length >= 1) || false\n      },\n      // 切换处理\n      toggleHandle (index, row) {\n        if (this.hasChild(row)) {\n          let data = this.$parent.store.states.data.slice(0)\n          data[index]._expanded = !data[index]._expanded\n          if (data[index]._expanded) {\n            data = data.splice(0, index + 1).concat(row[this.childKey]).concat(data)\n          } else {\n            data = this.removeChildNode(data, row[this.treeKey])\n          }\n          this.$parent.store.commit('setData', data)\n          this.$nextTick(() => {\n            this.$parent.doLayout()\n          })\n        }\n      },\n      // 移除子节点\n      removeChildNode (data, parentId) {\n        let parentIds = isArray(parentId) ? parentId : [parentId]\n        if (parentId.length <= 0) {\n          return data\n        }\n        let ids = []\n        for (let i = 0; i < data.length; i++) {\n          if (parentIds.indexOf(data[i][this.parentKey]) !== -1 && parentIds.indexOf(data[i][this.treeKey]) === -1) {\n            ids.push(data.splice(i, 1)[0][this.treeKey])\n            i--\n          }\n        }\n        return this.removeChildNode(data, ids)\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/table-tree-column/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-table-column',_vm._b({attrs:{\"prop\":_vm.prop},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{style:(_vm.childStyles(scope.row)),on:{\"click\":function($event){$event.preventDefault();_vm.toggleHandle(scope.$index, scope.row)}}},[_c('i',{class:_vm.iconClasses(scope.row),style:(_vm.iconStyles(scope.row))}),_vm._v(\"\\n      \"+_vm._s(scope.row[_vm.prop])+\"\\n    \")])]}}])},'el-table-column',_vm.$attrs,false))}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-316cf042\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/table-tree-column/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-316cf042\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/table-tree-column/index.vue\n// module id = null\n// module chunks = ","<template>\n  <el-dialog\n    :title=\"!dataForm.id ? '新增' : '修改'\"\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"visible\">\n    <el-form :model=\"dataForm\" :rules=\"dataRule\" ref=\"dataForm\" @keyup.enter.native=\"dataFormSubmit()\" label-width=\"80px\">\n        <el-form-item label=\"排序\" prop=\"num\">\n            <el-input v-model=\"dataForm.num\" placeholder=\"排序\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"父部门\" prop=\"pname\">\n          <el-popover\n            ref=\"deptListPopover\"\n            placement=\"bottom-start\"\n            trigger=\"click\"\n            v-model=\"visible2\">\n            <el-tree\n              :data=\"deptList\"\n              :props=\"deptListTreeProps\"\n              node-key=\"id\"\n              ref=\"deptListTree\"\n              @current-change=\"deptListTreeCurrentChangeHandle\"\n              :default-expand-all=\"true\"\n              :highlight-current=\"true\"\n              :expand-on-click-node=\"false\">\n            </el-tree>\n          </el-popover>\n            <el-input v-model=\"dataForm.pname\"  v-popover:deptListPopover :readonly=\"true\" placeholder=\"点击选择上级菜单\" class=\"menu-list__input\"   ></el-input>\n        </el-form-item>\n        <el-form-item label=\"名称\" prop=\"simplename\">\n            <el-input v-model=\"dataForm.simplename\" placeholder=\"简称\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"地址\" prop=\"adress\">\n            <el-input v-model=\"dataForm.adress\" placeholder=\"地址\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电话\" prop=\"phone\">\n            <el-input v-model=\"dataForm.phone\" placeholder=\"电话\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"公司名\" prop=\"company\">\n            <el-input v-model=\"dataForm.company\" placeholder=\"公司名\"></el-input>\n        </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">取消</el-button>\n      <el-button type=\"primary\" @click=\"dataFormSubmit()\">确定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        visible: false,\n        visible2: false,\n        dataForm: {\n          id: '',\n          num: 0,\n          pid: '',\n          pname: '',\n          simplename: '',\n          fullname: '',\n          adress: '',\n          phone: '',\n          company: ''\n        },\n        deptList: [],\n        deptListTreeProps: {\n          label: 'label',\n          children: 'children'\n        },\n        dataRule: {\n          pid: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          simplename: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n          ],\n          company: [\n              { required: true, message: '不能为空', trigger: 'blur' }\n          ]\n        }\n      }\n    },\n    methods: {\n      init (id) {\n        this.dataForm.id = id || 0\n        this.$http.get(this.$http.adornUrl('/sysdept/depttree'))\n          .then(({data}) => {\n            if (data) {\n              if (this.deptList.length === 0) {\n                this.deptList.push(data)\n              }\n            }\n          }).then(() => {\n            this.visible = true\n            this.$nextTick(() => {\n              this.$refs['dataForm'].resetFields()\n              if (this.dataForm.id) {\n                this.$http({\n                  url: this.$http.adornUrl(`/sysdept/info`),\n                  method: 'get',\n                  params: this.$http.adornParams({\n                    'id': this.dataForm.id\n                  })\n                }).then(({data}) => {\n                  if (data && data.code === 0) {\n                    this.dataForm.num = data.sysdept.num\n                    this.dataForm.pid = data.sysdept.pid\n                    this.dataForm.pname = data.sysdept.pname\n                    this.dataForm.simplename = data.sysdept.simplename\n                    this.dataForm.fullname = data.sysdept.fullname\n                    this.dataForm.adress = data.sysdept.adress\n                    this.dataForm.phone = data.sysdept.phone\n                    this.dataForm.company = data.sysdept.company\n                    this.deptListTreeSetCurrentNode()\n                  }\n                }\n              )\n              } else {\n                this.deptListTreeSetCurrentNode()\n              }\n            }\n          )\n          }\n      )\n      },\n      // 菜单树选中\n      deptListTreeCurrentChangeHandle (data, node) {\n        this.dataForm.pid = data.id\n        this.dataForm.pname = data.label\n        //  pname\n        this.visible2 = false\n      },\n      // 菜单树设置当前选中节点\n      deptListTreeSetCurrentNode () {\n        this.$refs.deptListTree.setCurrentKey(this.dataForm.pid)\n        this.dataForm.pname = (this.$refs.deptListTree.getCurrentNode() || {})['label']\n      },\n      // 表单提交\n      dataFormSubmit () {\n        this.$refs['dataForm'].validate((valid) => {\n          if (valid) {\n            this.$http({\n              url: this.$http.adornUrl(`/sysdept/${!this.dataForm.id ? 'add' : 'update'}`),\n              method: 'post',\n              data: this.$http.adornData({\n                'id': this.dataForm.id || undefined,\n                'num': this.dataForm.num,\n                'pid': this.dataForm.pid,\n                'simplename': this.dataForm.simplename,\n                'fullname': this.dataForm.fullname,\n                'version': this.dataForm.version,\n                'adress': this.dataForm.adress,\n                'phone': this.dataForm.phone,\n                'company': this.dataForm.company\n              })\n            }).then(({data}) => {\n              if (data && data.code === 0) {\n                this.$message({\n                  message: '操作成功',\n                  type: 'success',\n                  duration: 1500,\n                  onClose: () => {\n                    this.visible = false\n                    this.$emit('refreshDataList')\n                  }\n                })\n              } else {\n                this.$message.error(data.msg)\n              }\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/modules/sys/sysdept-add-update.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":!_vm.dataForm.id ? '新增' : '修改',\"close-on-click-modal\":false,\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.dataRule,\"label-width\":\"80px\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.dataFormSubmit()}}},[_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"num\"}},[_c('el-input',{attrs:{\"placeholder\":\"排序\"},model:{value:(_vm.dataForm.num),callback:function ($$v) {_vm.$set(_vm.dataForm, \"num\", $$v)},expression:\"dataForm.num\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"父部门\",\"prop\":\"pname\"}},[_c('el-popover',{ref:\"deptListPopover\",attrs:{\"placement\":\"bottom-start\",\"trigger\":\"click\"},model:{value:(_vm.visible2),callback:function ($$v) {_vm.visible2=$$v},expression:\"visible2\"}},[_c('el-tree',{ref:\"deptListTree\",attrs:{\"data\":_vm.deptList,\"props\":_vm.deptListTreeProps,\"node-key\":\"id\",\"default-expand-all\":true,\"highlight-current\":true,\"expand-on-click-node\":false},on:{\"current-change\":_vm.deptListTreeCurrentChangeHandle}})],1),_vm._v(\" \"),_c('el-input',{directives:[{name:\"popover\",rawName:\"v-popover:deptListPopover\",arg:\"deptListPopover\"}],staticClass:\"menu-list__input\",attrs:{\"readonly\":true,\"placeholder\":\"点击选择上级菜单\"},model:{value:(_vm.dataForm.pname),callback:function ($$v) {_vm.$set(_vm.dataForm, \"pname\", $$v)},expression:\"dataForm.pname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"simplename\"}},[_c('el-input',{attrs:{\"placeholder\":\"简称\"},model:{value:(_vm.dataForm.simplename),callback:function ($$v) {_vm.$set(_vm.dataForm, \"simplename\", $$v)},expression:\"dataForm.simplename\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"地址\",\"prop\":\"adress\"}},[_c('el-input',{attrs:{\"placeholder\":\"地址\"},model:{value:(_vm.dataForm.adress),callback:function ($$v) {_vm.$set(_vm.dataForm, \"adress\", $$v)},expression:\"dataForm.adress\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"placeholder\":\"电话\"},model:{value:(_vm.dataForm.phone),callback:function ($$v) {_vm.$set(_vm.dataForm, \"phone\", $$v)},expression:\"dataForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"公司名\",\"prop\":\"company\"}},[_c('el-input',{attrs:{\"placeholder\":\"公司名\"},model:{value:(_vm.dataForm.company),callback:function ($$v) {_vm.$set(_vm.dataForm, \"company\", $$v)},expression:\"dataForm.company\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dataFormSubmit()}}},[_vm._v(\"确定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4c96558a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/modules/sys/sysdept-add-update.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./sysdept-add-update.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c96558a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./sysdept-add-update.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/modules/sys/sysdept-add-update.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"mod-config\">\n    <el-form :inline=\"true\" :model=\"dataForm\" @keyup.enter.native=\"getDataList()\">\n      <el-form-item>\n        <el-input v-model=\"dataForm.key\" placeholder=\"参数名\" clearable></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"getDataList()\">查询</el-button>\n        <el-button v-if=\"isAuth('sysdept:add')\" type=\"primary\" @click=\"addOrUpdateHandle()\">新增</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table\n      :data=\"dataList\"\n      border\n      stripe\n      :height=\"tableViewHight\"\n      ref=\"sysdeptTable\"\n      v-loading=\"dataListLoading\"\n      style=\"width: 100%;\">\n      <table-tree-column\n        prop=\"simplename\"\n        header-align=\"center\"\n        treeKey=\"id\"\n        parentKey=\"pid\"\n        width=\"150\"\n        label=\"简称\">\n      </table-tree-column>\n      <el-table-column\n        prop=\"num\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"排序\">\n      </el-table-column>\n      <el-table-column\n        prop=\"fullname\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"全称\">\n      </el-table-column>\n      <el-table-column\n        prop=\"adress\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"地址\">\n      </el-table-column>\n      <el-table-column\n        prop=\"phone\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"电话\">\n      </el-table-column>\n      <el-table-column\n        prop=\"company\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"公司名\">\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"150\"\n        label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"small\" @click=\"addOrUpdateHandle(scope.row.id)\">修改</el-button>\n          <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row.id)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 弹窗, 新增 / 修改 -->\n    <add-or-update v-if=\"addOrUpdateVisible\" ref=\"addOrUpdate\" @refreshDataList=\"getDataList\"></add-or-update>\n  </div>\n</template>\n\n<script>\n  import TableTreeColumn from '@/components/table-tree-column'\n  import { treeDataTranslate } from '@/utils'\n  import AddOrUpdate from './sysdept-add-update'\n  export default {\n    data () {\n      return {\n        dataForm: {\n          key: ''\n        },\n        dataList: [],\n        dataListLoading: false,\n        addOrUpdateVisible: false\n      }\n    },\n    components: {\n      TableTreeColumn,\n      AddOrUpdate\n    },\n    computed: {\n      documentClientHeight: {\n        get () { return this.$store.state.common.documentClientHeight }\n      },\n      tableViewHight: {\n        get () {\n          let tableHight = this.documentClientHeight - 50 - 30 - 190\n          this.tableViewHight = tableHight\n          return tableHight\n        },\n        set (val) {}\n      }\n    },\n    activated () {\n      this.getDataList()\n    },\n    methods: {\n      // 获取数据列表\n      getDataList () {\n        this.dataListLoading = true\n        this.$http({\n          url: this.$http.adornUrl('/sysdept/all'),\n          method: 'get',\n          params: this.$http.adornParams()\n        }).then(({data}) => {\n          if (data && data.code === 0) {\n            this.dataList = treeDataTranslate(data.list, 'id', 'pid')\n            console.log(data.list)\n          } else {\n            this.dataList = []\n          }\n          this.dataListLoading = false\n        })\n      },\n      // 新增 / 修改\n      addOrUpdateHandle (id) {\n        this.addOrUpdateVisible = true\n        this.$nextTick(() => {\n          this.$refs.addOrUpdate.init(id)\n        })\n      },\n      // 删除\n      deleteHandle (id) {\n        this.$confirm(`确定对[id=${id}]进行[${id ? '删除' : '批量删除'}]操作?`, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$http({\n            url: this.$http.adornUrl('/sysdept/delete'),\n            method: 'post',\n            data: this.$http.adornData(id, false)\n          }).then(({data}) => {\n            if (data && data.code === 0) {\n              this.$message({\n                message: '操作成功',\n                type: 'success',\n                duration: 1500,\n                onClose: () => {\n                  this.getDataList()\n                }\n              })\n            } else {\n              this.$message.error(data.msg)\n            }\n          })\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/modules/sys/sysdept.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mod-config\"},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.dataForm},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.getDataList()}}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"参数名\",\"clearable\":\"\"},model:{value:(_vm.dataForm.key),callback:function ($$v) {_vm.$set(_vm.dataForm, \"key\", $$v)},expression:\"dataForm.key\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":function($event){_vm.getDataList()}}},[_vm._v(\"查询\")]),_vm._v(\" \"),(_vm.isAuth('sysdept:add'))?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addOrUpdateHandle()}}},[_vm._v(\"新增\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.dataListLoading),expression:\"dataListLoading\"}],ref:\"sysdeptTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.dataList,\"border\":\"\",\"stripe\":\"\",\"height\":_vm.tableViewHight}},[_c('table-tree-column',{attrs:{\"prop\":\"simplename\",\"header-align\":\"center\",\"treeKey\":\"id\",\"parentKey\":\"pid\",\"width\":\"150\",\"label\":\"简称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"num\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"排序\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fullname\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"全称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"adress\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"地址\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"电话\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"company\",\"header-align\":\"center\",\"align\":\"center\",\"label\":\"公司名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"header-align\":\"center\",\"align\":\"center\",\"width\":\"150\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.addOrUpdateHandle(scope.row.id)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.deleteHandle(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),(_vm.addOrUpdateVisible)?_c('add-or-update',{ref:\"addOrUpdate\",on:{\"refreshDataList\":_vm.getDataList}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-2496cff0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/modules/sys/sysdept.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./sysdept.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2496cff0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./sysdept.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/modules/sys/sysdept.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}